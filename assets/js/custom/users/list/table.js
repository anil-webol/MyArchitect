"use strict";var KTUsersList=function(){var e,t,r,n,o=document.getElementById("kt_table_users"),l=()=>{o.querySelectorAll('[data-kt-users-table-filter="delete_row"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();let r=t.target.closest("tr"),n=r.querySelectorAll("td")[1].querySelectorAll("a")[1].innerText;Swal.fire({text:"Are you sure you want to delete "+n+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:"Yes, delete!",cancelButtonText:"No, cancel",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(t){t.value?Swal.fire({text:"You have deleted "+n+"!.",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then(function(){e.row($(r)).remove().draw()}).then(function(){a()}):"cancel"===t.dismiss&&Swal.fire({text:customerName+" was not deleted.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}})})})})},c=()=>{let l=o.querySelectorAll('[type="checkbox"]');t=document.querySelector('[data-kt-user-table-toolbar="base"]'),r=document.querySelector('[data-kt-user-table-toolbar="selected"]'),n=document.querySelector('[data-kt-user-table-select="selected_count"]');let s=document.querySelector('[data-kt-user-table-select="delete_selected"]');l.forEach(e=>{e.addEventListener("click",function(){setTimeout(function(){a()},50)})}),s.addEventListener("click",function(){Swal.fire({text:"Are you sure you want to delete selected customers?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:"Yes, delete!",cancelButtonText:"No, cancel",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then(function(t){t.value?Swal.fire({text:"You have deleted all selected customers!.",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then(function(){l.forEach(t=>{t.checked&&e.row($(t.closest("tbody tr"))).remove().draw()}),o.querySelectorAll('[type="checkbox"]')[0].checked=!1}).then(function(){a(),c()}):"cancel"===t.dismiss&&Swal.fire({text:"Selected customers was not deleted.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}})})})};let a=()=>{let e=o.querySelectorAll('tbody [type="checkbox"]'),l=!1,c=0;e.forEach(e=>{e.checked&&(l=!0,c++)}),l?(n.innerHTML=c,t.classList.add("d-none"),r.classList.remove("d-none")):(t.classList.remove("d-none"),r.classList.add("d-none"))};return{init:function(){o&&(o.querySelectorAll("tbody tr").forEach(e=>{let t=e.querySelectorAll("td"),r=t[3].innerText.toLowerCase(),n=0,o="minutes";r.includes("yesterday")?(n=1,o="days"):r.includes("mins")?(n=parseInt(r.replace(/\D/g,"")),o="minutes"):r.includes("hours")?(n=parseInt(r.replace(/\D/g,"")),o="hours"):r.includes("days")?(n=parseInt(r.replace(/\D/g,"")),o="days"):r.includes("weeks")&&(n=parseInt(r.replace(/\D/g,"")),o="weeks");let l=moment().subtract(n,o).format();t[3].setAttribute("data-order",l);let c=moment(t[5].innerHTML,"DD MMM YYYY, LT").format();t[5].setAttribute("data-order",c)}),(e=$(o).DataTable({info:!1,order:[],pageLength:10,lengthChange:!1,columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:4},]})).on("draw",function(){c(),l(),a()}),c(),document.querySelector('[data-kt-user-table-filter="search"]').addEventListener("keyup",function(t){e.search(t.target.value).draw()}),document.querySelector('[data-kt-user-table-filter="reset"]').addEventListener("click",function(){document.querySelector('[data-kt-user-table-filter="form"]').querySelectorAll("select").forEach(e=>{$(e).val("").trigger("change")}),e.search("").draw()}),l(),(()=>{let t=document.querySelector('[data-kt-user-table-filter="form"]'),r=t.querySelector('[data-kt-user-table-filter="filter"]'),n=t.querySelectorAll("select");r.addEventListener("click",function(){var t="";n.forEach((e,r)=>{e.value&&""!==e.value&&(0!==r&&(t+=" "),t+=e.value)}),e.search(t).draw()})})())}}}();KTUtil.onDOMContentLoaded(function(){KTUsersList.init()});